Google Lớp học
Lớp học
HTN T4 HK2 2023-2024
Màn hình chính
Lịch
Đã đăng ký
Việc cần làm
H
HTN T4 HK2 2023-2024
Lớp học đã lưu trữ
Cài đặt
Bảng tin
Bài tập trên lớp
Mọi người
HTN T4 HK2 2023-2024
Sắp đến hạn
Tuyệt vời, không có bài tập nào sắp đến hạn!

Thông báo nội dung nào đó cho lớp học của bạn

Thông báo: "4. Thư viện và driver"
duc ha
Được tạo 17 thg 417 thg 4
4. Thư viện và driver

Vidu.zip
Lưu trữ nén

4. Advanced Embedded programming.pptx
PowerPoint

hello_driver.c
C

Makefile
Tệp nhị phân

spi_driver_demo.c
C

Thêm nhận xét trong lớp học...


Thông báo: "Link bài giảng online phần wire…"
duc ha
Được tạo 28 thg 328 thg 3
Link bài giảng online phần wire communication (tiếp)
14. Giao tiếp I2C
https://drive.google.com/file/d/1R8iQVnjK9h1w9u5xyS2nLGw1INipOOO3/view?usp=sharing
15. Ví dụ I2C
https://drive.google.com/file/d/1iH81YwydUuP2AjSrnJAibYcjFymB4yVc/view?usp=sharing
16. Ví dụ I2C - MPU6050
https://drive.google.com/file/d/1L4eTCZ-iKwUD2h-Rk6EX0yafAoP_JnlX/view?usp=sharing
17. Giao tiếp Uart trên Raspberry
https://drive.google.com/file/d/1AxqPhx2ubMpxoy6cva0f6UfIyqIVgiPe/view?usp=sharing

Thêm nhận xét trong lớp học...


Thông báo: "Link bài giảng online phần wire…"
duc ha
Được tạo 18 thg 318 thg 3 (Đã chỉnh sửa 18 thg 3)
Link bài giảng online phần wire communication
11. Review về các chuẩn giao tiếp cơ bản
https://drive.google.com/file/d/1YG7DOsLc-r5I7sHPNmJPamk7rGciNHGW/view?usp=sharing

12. Giao tiếp SPI trên Raspberry
https://drive.google.com/file/d/1i_WpzqQ5jTX6uR6Gacw758MiXyMQUotJ/view?usp=sharing

13. Ví dụ về giao tiếp SPI
https://drive.google.com/file/d/1M3IrX8ITdqg2Fp17h4uJmZgbJoEqr9Cn/view?usp=sharing

Bài tập phần SPI.txt
Văn bản

Thêm nhận xét trong lớp học...

Bài tập: "Lớp chiều T4 nộp code bài KT 1"
duc ha đã đăng một bài tập mới: Lớp chiều T4 nộp code bài KT 1
Được tạo 13 thg 313 thg 3 (Đã chỉnh sửa 13 thg 3)
Bài tập: "Lớp sáng T4 nộp code KT1 "
duc ha đã đăng một bài tập mới: Lớp sáng T4 nộp code KT1
Được tạo 13 thg 313 thg 3

Thông báo: "Link bài giảng online (tiếp) 7. Các…"
duc ha
Được tạo 28 thg 228 thg 2
Link bài giảng online (tiếp)
7. Các phương pháp biên soạn, chỉnh sửa code cho raspberry
https://drive.google.com/file/d/1iyTXQVX69GLMAj8Ko3UajfsHLmFSNtIl/view?usp=sharing

8. Kết nối raspberry với các bo công suất
https://drive.google.com/file/d/1j1h_kRd2TJ60wMeZiZthYPTWBEs5WxOC/view?usp=sharing

9. Lập trình IO cho raspberry (tiếp) - Interrupt
https://drive.google.com/file/d/1beweViu6zYmg9guN-El5H6giKJ6ucWWN/view?usp=sharing

10. Tạo xung PWM
https://drive.google.com/file/d/1ZXR27hZwQDwn_43toUaWit3NMIGDkjUX/view?usp=sharing

Excercise 1.pdf
PDF

Thêm nhận xét trong lớp học...


Thông báo: "Thư viện cần cài đặt trên raspberry…"
duc ha
Được tạo 21 thg 221 thg 2
Thư viện cần cài đặt trên raspberry

wiringPi libraries :
Raspberry 3/4/zero version 1:
wget https://project-downloads.drogon.net/wiringpi-latest.deb
sudo dpkg -i wiringpi-latest.deb
gpio -v
Raspberry zero version 2:
wget https://github.com/WiringPi/WiringPi/releases/download/2.61-1/wiringpi-2.61-1-armhf.deb
sudo dpkg -i wiringpi-2.61-1-armhf.deb
gpio -v

Thêm nhận xét trong lớp học...


Thông báo: "Raspberry programming"
duc ha
Được tạo 21 thg 221 thg 2
Raspberry programming

3. Raspberry programming.pdf
PDF

Thêm nhận xét trong lớp học...


Thông báo: "Cài đặt Raspberry Link OS (bulleye):…"
duc ha
Được tạo 24 thg 124 thg 1
Cài đặt Raspberry
Link OS (bulleye):
https://downloads.raspberrypi.com/raspios_armhf/images/raspios_armhf-2022-01-28/

Hướng dẫn cấu hình Raspberry.docx
Word

Thêm nhận xét trong lớp học...


Thông báo: "Link bài giảng online: 1. Hệ điều hành…"
duc ha
Được tạo 17 thg 117 thg 1 (Đã chỉnh sửa 17 thg 1)
Link bài giảng online:

1. Hệ điều hành Linux
https://drive.google.com/file/d/1_JEGEmsxZ_aEBxNzbCxc9v3gj-91FGP0/view?usp=sharing
2. Hệ điều hành Linux (tiếp)
https://drive.google.com/file/d/1lgWLMjOb-c5rMt4RnfQV_nXrx8so4inx/view?usp=sharing
3. Quản lý source code với Git
https://drive.google.com/file/d/1t6GJxt0_W4EyFmYM778C2Dd3iYBGjzEU/view?usp=sharing

Thêm nhận xét trong lớp học...

Bảng tin
/*
 * SPI testing utility (using spidev driver)
 *
 * Copyright (c) 2007  MontaVista Software, Inc.
 * Copyright (c) 2007  Anton Vorontsov <avorontsov@ru.mvista.com>
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 2 of the License.
 *
 * Cross-compile with cross-gcc -I/path/to/cross-kernel/include
 */

#include <stdint.h>
#include <unistd.h>
#include <stdio.h>
#include <stdlib.h>
#include <getopt.h>
#include <fcntl.h>
#include <sys/ioctl.h>
#include <linux/types.h>
#include <linux/spi/spidev.h>

#define ARRAY_SIZE(a) (sizeof(a) / sizeof((a)[0]))

static void pabort(const char *s)
{
	perror(s);
	abort();
}

static const char *device = "/dev/spidev0.0";
static uint8_t mode, lsb_first;
static uint8_t bits = 8;
static uint32_t speed = 500000;
static uint16_t delay;

static void transfer(int fd)
{
	int ret;
	uint8_t tx[] = {
		0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
		0x40, 0x00, 0x00, 0x00, 0x00, 0x95,
		0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
		0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
		0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
		0xDE, 0xAD, 0xBE, 0xEF, 0xBA, 0xAD,
		0xF0, 0x0D,
	};
	uint8_t rx[ARRAY_SIZE(tx)] = {0, };
	struct spi_ioc_transfer tr = {
		.tx_buf = (unsigned long)tx,
		.rx_buf = (unsigned long)rx,
		.len = ARRAY_SIZE(tx),
		.delay_usecs = delay,
		.speed_hz = speed,
		.bits_per_word = bits,
	};

	ret = ioctl(fd, SPI_IOC_MESSAGE(1), &tr);
	if (ret < 1)
		pabort("can't send spi message");

	for (ret = 0; ret < ARRAY_SIZE(tx); ret++) {
		if (!(ret % 6))
			puts("");
		printf("%.2X ", rx[ret]);
	}
	puts("");
}

int main(int argc, char *argv[])
{
	int ret = 0;
	int fd;


	fd = open("/dev/spidev0.0", O_RDWR);
	if (fd < 0)
		pabort("can't open device");

	/*
	 * spi mode
	 */
	mode = SPI_MODE_0;
	ret = ioctl(fd, SPI_IOC_WR_MODE, &mode);
	if (ret == -1)
		pabort("can't set spi mode");

	ret = ioctl(fd, SPI_IOC_RD_MODE, &mode);
	if (ret == -1)
		pabort("can't get spi mode");

	lsb_first = 0;
	ret = ioctl(fd, SPI_IOC_RD_LSB_FIRST, &lsb_first);
	if (ret) {
		perror("ioctl(SPI_IOC_RD_LSB_FIRST) failed");
		exit(1);
	}
	ret = ioctl(fd, SPI_IOC_WR_LSB_FIRST, &lsb_first);
	if (ret) {
		perror("ioctl(SPI_IOC_WR_LSB_FIRST) failed");
		exit(1);
	}

	/*
	 * bits per word
	 */
	ret = ioctl(fd, SPI_IOC_WR_BITS_PER_WORD, &bits);
	if (ret == -1)
		pabort("can't set bits per word");

	ret = ioctl(fd, SPI_IOC_RD_BITS_PER_WORD, &bits);
	if (ret == -1)
		pabort("can't get bits per word");

	/*
	 * max speed hz
	 */
	ret = ioctl(fd, SPI_IOC_WR_MAX_SPEED_HZ, &speed);
	if (ret == -1)
		pabort("can't set max speed hz");

	ret = ioctl(fd, SPI_IOC_RD_MAX_SPEED_HZ, &speed);
	if (ret == -1)
		pabort("can't get max speed hz");

	printf("spi mode: %d\n", mode);
	printf("bits per word: %d\n", bits);
	printf("max speed: %d Hz (%d KHz)\n", speed, speed/1000);

	transfer(fd);

	close(fd);

	return ret;
}

spi_driver_demo.c
Đang hiển thị spi_driver_demo.c.
